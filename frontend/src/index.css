@tailwind base;
@tailwind components;
@tailwind utilities;

/* Line clamp utilities */
@layer utilities {
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }
  
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }
}

/* Custom styles for the digital article */
@layer base {
  body {
    @apply font-sans text-gray-900 bg-gray-50;
  }
}

@layer components {
  .cell-container {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 mb-4 overflow-hidden;
  }
  
  .cell-header {
    @apply flex items-center justify-between p-3 border-b border-gray-100 bg-gray-50;
  }
  
  .cell-content {
    @apply p-4;
  }
  
  .result-panel {
    @apply mt-4;
  }
  
  .prompt-editor {
    @apply w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none;
  }
  
  .code-editor {
    @apply w-full font-mono text-sm bg-gray-900 text-gray-100 p-4 rounded-md;
  }
  
  .btn {
    @apply px-4 py-2 rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  .btn-primary {
    @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500;
  }
  
  .btn-secondary {
    @apply bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500;
  }
  
  .btn-danger {
    @apply bg-red-600 text-white hover:bg-red-700 focus:ring-red-500;
  }
  
  .output-table {
    @apply min-w-full divide-y divide-gray-200;
  }
  
  .output-table th {
    @apply px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50;
  }
  
  .output-table td {
    @apply px-6 py-4 whitespace-nowrap text-sm text-gray-900;
  }
  
  .plot-container {
    @apply flex justify-center items-center bg-white rounded-md border border-gray-200 p-4;
  }
  
  .error-message {
    @apply text-red-600 bg-red-50 border border-red-200 rounded-md p-3;
  }
  
  .success-message {
    @apply text-green-600 bg-green-50 border border-green-200 rounded-md p-3;
  }

  /* File Viewer Modal Styles */
  .markdown-content {
    @apply text-gray-900;
  }
  
  .markdown-content h1 {
    @apply text-2xl font-bold text-gray-900 mt-6 mb-4 border-b border-gray-200 pb-2;
  }
  
  .markdown-content h2 {
    @apply text-xl font-bold text-gray-900 mt-5 mb-3;
  }
  
  .markdown-content h3 {
    @apply text-lg font-semibold text-gray-900 mt-4 mb-2;
  }
  
  .markdown-content p {
    @apply mb-3 leading-relaxed;
  }
  
  .markdown-content ul, .markdown-content ol {
    @apply mb-3 ml-6;
  }
  
  .markdown-content li {
    @apply mb-1;
  }
  
  .markdown-content code {
    @apply bg-gray-100 px-2 py-1 rounded text-sm font-mono text-gray-800;
  }
  
  .markdown-content pre {
    @apply bg-gray-100 p-4 rounded-md overflow-x-auto mb-3;
  }
  
  .markdown-content pre code {
    @apply bg-transparent p-0;
  }
  
  .markdown-content blockquote {
    @apply border-l-4 border-blue-500 pl-4 italic text-gray-700 my-3 bg-blue-50 py-2;
  }
  
  .markdown-content a {
    @apply text-blue-600 hover:text-blue-800 underline;
  }
  
  .markdown-content table {
    @apply min-w-full divide-y divide-gray-200 mb-3;
  }
  
  .markdown-content th {
    @apply px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50;
  }
  
  .markdown-content td {
    @apply px-4 py-2 whitespace-nowrap text-sm text-gray-900 border-b border-gray-200;
  }
  
  .markdown-content strong {
    @apply font-semibold text-gray-900;
  }
  
  .markdown-content em {
    @apply italic;
  }

  /* Editable field styles - much more subtle */
  .editable-field {
    position: relative;
  }
  
  .editable-field::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(to right, transparent 0%, #3b82f6 30%, #3b82f6 70%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .editable-field:hover::after {
    opacity: 0.2;
  }

  /* Edit mode animations */
  .edit-mode-enter {
    animation: editModeEnter 0.3s ease-out;
  }

  @keyframes editModeEnter {
    from {
      opacity: 0;
      transform: scale(0.98);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Toast notification animation */
  .animate-slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Enhanced button styles for edit mode */
  .edit-action-button {
    @apply transition-all duration-200 transform hover:scale-105 active:scale-95;
  }
  
  /* Enhanced scrollbar styles for data tables */
  .enhanced-table-scroll::-webkit-scrollbar {
    height: 8px;
    width: 8px;
  }
  
  .enhanced-table-scroll::-webkit-scrollbar-track {
    background: #f8fafc;
    border-radius: 4px;
  }
  
  .enhanced-table-scroll::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
    border: 2px solid #f8fafc;
  }
  
  .enhanced-table-scroll::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }
  
  .enhanced-table-scroll::-webkit-scrollbar-corner {
    background: #f8fafc;
  }
  
  /* For Firefox */
  .enhanced-table-scroll {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e1 #f8fafc;
  }

  /* Custom styles for data tables */
  .overflow-x-auto::-webkit-scrollbar {
    height: 8px;
  }
  
  .overflow-x-auto::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 4px;
  }
  
  .overflow-x-auto::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
  }
  
  .overflow-x-auto::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }
  
  /* For Firefox */
  .overflow-x-auto {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e1 #f1f5f9;
  }
  
  /* Copy button animation */
  .copy-button {
    @apply transition-all duration-200 transform hover:scale-110 active:scale-95;
  }
  
  .copy-success {
    @apply animate-pulse;
  }
  
  /* ==========================================================
     Unified Markdown Styles (MarkdownRenderer component)
     Used for: chat panels, review modal, methodology sections
     ========================================================== */
  
  /* Base markdown styles */
  .md-content {
    @apply text-gray-900 leading-relaxed;
  }
  
  .md-content h1, .md-content h2, .md-content h3, .md-content h4 {
    @apply font-semibold text-gray-900;
    margin-top: 1em;
    margin-bottom: 0.5em;
    line-height: 1.3;
  }
  
  .md-content h1 { @apply text-xl; }
  .md-content h2 { @apply text-lg; }
  .md-content h3 { @apply text-base; }
  .md-content h4 { @apply text-sm; }
  
  .md-content p {
    @apply mb-3;
  }
  
  .md-content strong {
    @apply font-semibold text-gray-900;
  }
  
  .md-content em {
    @apply italic;
  }
  
  .md-content ul, .md-content ol {
    @apply mb-3 pl-6;
  }
  
  .md-content ul {
    @apply list-disc;
  }
  
  .md-content ol {
    @apply list-decimal;
  }
  
  .md-content li {
    @apply mb-1;
  }
  
  /* Inline code */
  .md-content code {
    @apply bg-gray-100 px-1.5 py-0.5 rounded text-sm font-mono text-gray-800;
  }
  
  /* Code block wrapper with copy button */
  .md-code-block-wrapper {
    @apply relative mb-3;
  }
  
  .md-code-block-wrapper pre {
    @apply mb-0;
  }
  
  /* Code block copy button */
  .md-code-copy-btn {
    @apply absolute top-2 right-2 px-2 py-1 text-xs font-medium;
    @apply bg-white/90 hover:bg-white text-gray-600 hover:text-gray-900;
    @apply border border-gray-300 rounded shadow-sm;
    @apply transition-all duration-150 cursor-pointer;
    @apply opacity-0;
  }
  
  .md-code-block-wrapper:hover .md-code-copy-btn {
    @apply opacity-100;
  }
  
  .md-code-copy-btn:hover {
    @apply shadow;
  }
  
  .md-code-copy-btn.md-copy-success {
    @apply bg-green-100 text-green-700 border-green-300;
  }
  
  /* Code blocks (pre > code) */
  .md-content pre {
    @apply bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto mb-3;
    @apply text-sm leading-relaxed;
  }
  
  .md-content pre code {
    @apply bg-transparent p-0 text-inherit;
  }
  
  .md-content blockquote {
    @apply border-l-4 border-blue-400 pl-4 italic text-gray-700 my-3 bg-blue-50 py-2 rounded-r;
  }
  
  .md-content a {
    @apply text-blue-600 hover:text-blue-800 underline;
  }
  
  .md-content table {
    @apply min-w-full divide-y divide-gray-200 mb-3;
  }
  
  .md-content th {
    @apply px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50;
  }
  
  .md-content td {
    @apply px-4 py-2 text-sm text-gray-900 border-b border-gray-200;
  }
  
  /* Compact variant - reduced spacing for chat and review panels */
  .md-compact h1, .md-compact h2, .md-compact h3, .md-compact h4 {
    margin-top: 0.75em;
    margin-bottom: 0.5em;
  }
  
  .md-compact h1 { font-size: 1.25em; }
  .md-compact h2 { font-size: 1.15em; }
  .md-compact h3 { font-size: 1.1em; }
  .md-compact h4 { font-size: 1em; }
  
  .md-compact p {
    @apply mb-2;
  }
  
  .md-compact ul, .md-compact ol {
    @apply mb-2 pl-5;
  }
  
  .md-compact li {
    @apply mb-0.5;
  }
  
  .md-compact pre {
    @apply p-3 mb-2;
  }
  
  .md-compact blockquote {
    @apply my-2;
  }
  
  /* Inverted variant - white text on dark backgrounds (user chat bubbles) */
  .md-inverted {
    @apply text-white;
  }
  
  .md-inverted h1, .md-inverted h2, .md-inverted h3, .md-inverted h4 {
    @apply text-white;
  }
  
  .md-inverted strong {
    @apply text-white;
  }
  
  .md-inverted code {
    background-color: rgba(255, 255, 255, 0.15);
    @apply text-white;
  }
  
  .md-inverted pre {
    background-color: rgba(255, 255, 255, 0.15);
    @apply text-white;
  }
  
  .md-inverted .md-code-copy-btn {
    @apply bg-white/20 hover:bg-white/30 text-white border-white/30;
  }
  
  .md-inverted .md-code-copy-btn.md-copy-success {
    @apply bg-green-500/30 text-green-100 border-green-400/50;
  }
  
  .md-inverted a {
    @apply text-white underline decoration-white/50 hover:decoration-white;
  }
  
  .md-inverted blockquote {
    border-left-color: rgba(255, 255, 255, 0.3);
    background-color: rgba(255, 255, 255, 0.1);
    @apply text-white/90;
  }

  /* JSON syntax highlighting */
  .json-content {
    color: #374151;
  }
  
  .json-content .language-json {
    background: transparent;
    padding: 0;
  }
  
  /* Simple JSON syntax highlighting using CSS */
  .json-content code {
    background: transparent;
    padding: 0;
    font-size: 13px;
    line-height: 1.6;
  }

  /* Monaco Editor Inline Diff Styles */
  .diff-line-added {
    background-color: rgba(40, 167, 69, 0.15) !important;
    border-left: 3px solid #28a745 !important;
  }
  
  .diff-line-modified {
    background-color: rgba(0, 122, 204, 0.15) !important;
    border-left: 3px solid #007acc !important;
  }
  
  .diff-line-removed {
    background-color: rgba(220, 53, 69, 0.15) !important;
    border-left: 3px solid #dc3545 !important;
  }
  
  .diff-glyph-added::before {
    content: '+';
    color: #28a745;
    font-weight: bold;
    font-size: 14px;
  }
  
  .diff-glyph-modified::before {
    content: '~';
    color: #007acc;
    font-weight: bold;
    font-size: 14px;
  }
  
  .diff-glyph-removed::before {
    content: '-';
    color: #dc3545;
    font-weight: bold;
    font-size: 14px;
  }
}
